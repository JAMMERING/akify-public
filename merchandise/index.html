<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <title>AKIFY ë§¤ë¬¼ ë³´ê¸°</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- iOS Smart App Banner -->
    <meta name="apple-itunes-app" content="app-id=6751454780" />
    <script>
      // Smart App Bannerì— í˜„ì¬ URLì„ ì „ë‹¬í•˜ë„ë¡ ë™ì  ì„¤ì •
      (function() {
        const currentUrl = window.location.href;
        const metaTag = document.querySelector('meta[name="apple-itunes-app"]');
        if (metaTag) {
          metaTag.setAttribute('content', 'app-id=6751454780, app-argument=' + currentUrl);
        }
      })();
    </script>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        margin: 0;
        padding: 24px;
        background: #1E1E1F;
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
      }
      .card {
        width: 100%;
        max-width: 500px;
        padding: 48px;
        background: #1E1E1F;
        overflow: hidden;
        border-radius: 36px;
        outline: 1px rgba(255, 255, 255, 0.10) solid;
        outline-offset: -1px;
        display: flex;
        flex-direction: column;
        gap: 20px;
      }
      .head {
        padding: 8px 16px;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 16px;
        display: inline-flex;
        align-self: flex-start;
        justify-content: center;
        align-items: center;
        gap: 10px;
      }
      .head-text {
        color: white;
        font-size: 12px;
        font-weight: 700;
        line-height: 16px;
        word-wrap: break-word;
      }
      .text-group {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }
      .title {
        color: white;
        font-size: 32px;
        font-weight: 700;
        line-height: 40px;
        word-wrap: break-word;
      }
      .text {
        color: white;
        font-size: 16px;
        font-weight: 500;
        line-height: 20px;
        word-wrap: break-word;
      }
      .merchandise-id {
        color: #7E7E7E;
        font-size: 14px;
        font-weight: 500;
        line-height: 16px;
        word-wrap: break-word;
      }
      .button-group {
        display: flex;
        flex-direction: column;
        gap: 14px;
      }
      .button {
        padding: 16px;
        overflow: hidden;
        border-radius: 16px;
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        border: none;
        width: 100%;
        font-family: inherit;
        transition: transform 0.1s;
      }
      .button:active {
        transform: translateY(1px);
      }
      .button.primary {
        background: #D1FF54;
      }
      .button.primary .button-text {
        color: black;
        font-size: 18px;
        font-weight: 700;
        word-wrap: break-word;
      }
      .button.secondary {
        background: transparent;
        outline: 1px rgba(255, 255, 255, 0.50) solid;
        outline-offset: -1px;
        text-decoration: none;
      }
      .button.secondary .button-text {
        color: rgba(255, 255, 255, 0.80);
        font-size: 18px;
        font-weight: 700;
        word-wrap: break-word;
      }
      .button.secondary-yellow {
        background: transparent;
        outline: 1px #D1FF54 solid;
        outline-offset: -1px;
        text-decoration: none;
      }
      .button.secondary-yellow .button-text {
        color: #D1FF54;
        font-size: 18px;
        font-weight: 700;
        word-wrap: break-word;
      }
      .caption {
        color: #636363;
        font-size: 13px;
        font-weight: 400;
        line-height: 20px;
        word-wrap: break-word;
      }
      .contact {
        color: white;
        font-size: 13px;
        font-weight: 500;
        word-wrap: break-word;
        text-decoration: none;
        cursor: pointer;
      }
      .contact:hover {
        text-decoration: underline;
      }

      @media (max-width: 600px) {
        .card {
          padding: 32px 24px;
        }
        .title {
          font-size: 28px;
          line-height: 36px;
        }
      }
    </style>
    <script>
      const IOS_STORE = "https://apps.apple.com/kr/app/%EC%95%84%ED%82%A4%ED%8C%8C%EC%9D%B4/id6751454780";
      const ANDROID_STORE =
        "https://play.google.com/store/apps/details?id=com.jammering.akify";

      const LANDING = "https://akify.io";

      function parsePostId() {
        // /merchandise/123 â†’ 123
        const match = window.location.pathname.match(
          /^\/merchandise\/([^/?#]+)/
        );
        return match ? decodeURIComponent(match[1]) : null;
      }

      function detectEnv() {
        const ua = navigator.userAgent || "";
        const isAndroid = /Android/i.test(ua);
        const isIOS = /iPhone|iPad|iPod/i.test(ua);
        const isMobile = isAndroid || isIOS;
        return { isAndroid, isIOS, isMobile };
      }

      function init() {
        const { isAndroid, isIOS, isMobile } = detectEnv();
        const postId = parsePostId();
        const idSpan = document.getElementById("post-id");
        if (postId && idSpan) {
          idSpan.textContent = postId;
        }

        // PCë©´ ë°”ë¡œ ëœë”© í˜ì´ì§€ë¡œ ë³´ë‚´ê¸°
        if (!isMobile) {
          window.location.replace(LANDING);
          return;
        }

        // ë²„íŠ¼ ì„¤ì •
        const openAppBtn = document.getElementById("open-app-btn");
        const storeBtn = document.getElementById("store-btn");
        const landingLink = document.getElementById("landing-link");

        // "ì•±ì—ì„œ ì—´ê¸°" ë²„íŠ¼ - í˜„ì¬ URLë¡œ ì•± ì—´ê¸° ì‹œë„
        openAppBtn.onclick = () => {
          const postId = parsePostId();

          if (isIOS) {
            // iOS: ì•± ìŠ¤í‚´ìœ¼ë¡œ ì§ì ‘ ì‹œë„
            const appScheme = `akify://merchandise/${postId || ''}`;

            // ë°©ë²• 1: ì§ì ‘ ì‹œë„
            window.location.href = appScheme;

            // ì•±ì´ ì—†ì„ ê²½ìš°ë¥¼ ëŒ€ë¹„í•´ 2ì´ˆ í›„ í™•ì¸
            setTimeout(() => {
              // í˜ì´ì§€ê°€ ì—¬ì „íˆ í¬ì»¤ìŠ¤ë˜ì–´ ìˆìœ¼ë©´ ì•±ì´ ì—†ëŠ” ê²ƒ
              if (!document.hidden) {
                // ì‚¬ìš©ìì—ê²Œ ì•ˆë‚´
                if (confirm('ì•±ì´ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•Šê±°ë‚˜ ì‹¤í–‰í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\nApp Storeë¡œ ì´ë™í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                  window.location.href = IOS_STORE;
                }
              }
            }, 2000);
          } else if (isAndroid) {
            // Android: Intent URL ì‚¬ìš© (Chrome ê³µì‹ ë°©ë²•)
            const currentUrl = window.location.href;

            // ë°©ë²• 1: Intent URLë¡œ ì•± ì—´ê¸° ì‹œë„
            const intentUrl = `intent://merchandise/${postId || ''}#Intent;scheme=akify;package=com.jammering.akify;S.browser_fallback_url=${encodeURIComponent(currentUrl)};end`;

            // ë°©ë²• 2: ë™ì‹œì— App Linkë„ ì‹œë„ (fallback)
            try {
              window.location.href = intentUrl;
            } catch (e) {
              // Intent URL ì‹¤íŒ¨ ì‹œ HTTPS URLë¡œ ì‹œë„ (App Link)
              window.location.href = currentUrl;
            }
          }
        };

        // "ì•± ì„¤ì¹˜í•˜ê³  ë§¤ë¬¼ ë³´ëŸ¬ ê°€ê¸°" ë²„íŠ¼ - ìŠ¤í† ì–´ë¡œ ì´ë™
        storeBtn.onclick = () => {
          if (isIOS) {
            window.location.href = IOS_STORE;
          } else if (isAndroid) {
            window.location.href = ANDROID_STORE;
          } else {
            window.location.href = LANDING;
          }
        };

        // "ì„œë¹„ìŠ¤ ì†Œê°œ í˜ì´ì§€ ë³´ê¸°" ë²„íŠ¼
        landingLink.href = LANDING;
      }

      window.addEventListener("DOMContentLoaded", init);
    </script>
  </head>
  <body>
    <div class="card">
      <div class="head">
        <div class="head-text">ğŸ”— ì•„í‚¤íŒŒì´ ë§¤ë¬¼ ê³µìœ  ë§í¬</div>
      </div>
      <div class="text-group">
        <div class="title">ì•±ì—ì„œ ë§¤ë¬¼ ìƒì„¸ë¥¼ í™•ì¸í•´ ì£¼ì„¸ìš”!</div>
        <div class="text">ì´ ë§í¬ëŠ” ì•„í‚¤íŒŒì´ ì•±ì—ì„œ ë§¤ë¬¼ ìƒì„¸ë¥¼ ë³´ê¸° ìœ„í•œ ë§í¬ì…ë‹ˆë‹¤.</div>
        <div class="merchandise-id">ë§¤ë¬¼ ID: <span id="post-id">ì•Œ ìˆ˜ ì—†ìŒ</span></div>
      </div>
      <div class="button-group">
        <button class="button primary" id="open-app-btn">
          <div class="button-text">ì•±ì—ì„œ ì—´ê¸°</div>
        </button>
        <button class="button secondary-yellow" id="store-btn">
          <div class="button-text">ì•± ì„¤ì¹˜í•˜ê³  ë§¤ë¬¼ ë³´ëŸ¬ ê°€ê¸°</div>
        </button>
        <a class="button secondary" id="landing-link" target="_blank">
          <div class="button-text">ì„œë¹„ìŠ¤ ì†Œê°œ í˜ì´ì§€ ë³´ê¸°</div>
        </a>
      </div>
      <div class="caption">
        ì´ë¯¸ ì•±ì„ ì„¤ì¹˜í•œ ìƒíƒœì„ì—ë„ í•´ë‹¹ í˜ì´ì§€ê°€ ê³„ì† ë³´ì¸ë‹¤ë©´, ë¡œê·¸ì¸ í›„ì— ì‹œë„í•´ ì£¼ì„¸ìš”. ë¬¸ì œê°€ ì§€ì†ì ìœ¼ë¡œ ë°œìƒí•  ì‹œ ì•„ë˜ ë©”ì¼ë¡œ ì—°ë½ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤.
      </div>
      <a href="mailto:info@jammering.com" class="contact">ë¬¸ì˜: info@jammering.com</a>
    </div>
  </body>
</html>
